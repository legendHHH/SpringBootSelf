package com.example.demo.json;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;

import java.util.Comparator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

/**
 * JSON对象和数组的测试
 *
 * @author legend
 * @version 1.0
 * @description
 * @date 2021/6/7
 */
public class JSONTest {

    public static void main(String[] args) {
        /*String json = "{\"code\":1,\"data\":{\"total\":25,\"isOver\":false,\"proList\":[{\"activityType\":\"\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"曼秀雷敦特柔润唇膏\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"26.9\",\"productCode\":\"2012384\",\"productId\":3510985,\"productImg\":\"https://guodadrugstores.cn/group1/M00/04/2F/CvEVD17pgKuADDe7AADnD0V0c8k430.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>特柔润唇膏-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>特柔润唇膏\",\"rx\":false,\"salesNum\":4,\"skuId\":3301664,\"spec\":\"3.0g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"},{\"activityType\":\"5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"曼秀雷敦薄荷润唇膏\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"25.9\",\"productCode\":\"2095707\",\"productId\":3510689,\"productImg\":\"https://guodadrugstores.cn/group1/M00/03/55/CvEVD15fQk6AdHjrAABsEx8Wmkk351.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>薄荷润唇膏-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>薄荷润唇膏(SPF15)\",\"rx\":false,\"salesNum\":4,\"skuId\":4991370,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"},{\"activityType\":\"1\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"exchangeType\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":0,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"29.9\",\"productCode\":\"2095695\",\"productId\":5374235,\"productImg\":\"https://guodadrugstores.cn/group1/M00/0A/BC/CvEVD2C0m_mAc-N4AAGKKUEnuYc371.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>男士润唇膏SPF15-冰凉型-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>男士润唇膏SPF15-冰凉型\",\"rx\":false,\"salesNum\":0,\"skuId\":5260209,\"spec\":\"3.5g\",\"storeId\":4818,\"storeName\":\"国大药房旗舰店\",\"xianShiPrice\":\"24.9\"},{\"activityType\":\"1,5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"曼秀雷敦男士润唇膏SPF15-冰凉型\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"29.9\",\"productCode\":\"2095695\",\"productId\":3510982,\"productImg\":\"https://guodadrugstores.cn/p/20/12320_main_3.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>男士润唇膏SPF15-冰凉型-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>男士润唇膏SPF15-冰凉型\",\"rx\":false,\"salesNum\":0,\"skuId\":3301661,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"24.9\"},{\"activityType\":\"5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"曼秀雷敦什果冰润唇膏(柠檬味)SPF15\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"25.9\",\"productCode\":\"1601071\",\"productId\":3510986,\"productImg\":\"https://guodadrugstores.cn/group1/M00/0A/2E/CvEVD2CZ-9GAWZARAAF_K_BbqDo378.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>什果冰润唇膏(柠檬味)SPF15-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>什果冰润唇膏(柠檬味)SPF15\",\"rx\":false,\"salesNum\":2,\"skuId\":3301665,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"},{\"activityType\":\"\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"exchangeType\":0,\"factory\":\"曼秀雷敦（中国）药业有限公司\",\"genericName\":\"复方薄荷脑软膏\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":0,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"49.5\",\"productCode\":\"1171166\",\"productId\":5304852,\"productImg\":\"https://guodadrugstores.cn/p/78/6278_main_1.jpg\",\"productName\":\"复方薄荷脑软膏-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>栢可\",\"rx\":false,\"salesNum\":0,\"skuId\":5175222,\"spec\":\"85g\",\"storeId\":4818,\"storeName\":\"国大药房旗舰店\",\"xianShiPrice\":\"\"},{\"brandId\":1061,\"brandName\":\"全部\",\"factory\":\"曼秀雷敦（中国）药业有限公司\",\"genericName\":\"\",\"hasStock\":true,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"49.5\",\"productCode\":\"1171166\",\"productId\":3511522,\"productImg\":\"https://guodadrugstores.cn/p/78/6278_main_1.jpg\",\"productName\":\"复方薄荷脑软膏-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>栢可\",\"rx\":false,\"salesNum\":0,\"skuId\":3302201,\"spec\":\"85g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\"},{\"activityType\":\"\",\"barCode\":\"0\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司(原:曼秀雷墩（中山）药业有限公司)\",\"genericName\":\"复方薄荷脑鼻用吸入剂\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":0,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"19.8\",\"productCode\":\"2044662\",\"productId\":5368952,\"productImg\":\"https://guodadrugstores.cn/group1/M00/00/2F/CvAUDlyLWVOAIdHFAAHb_-oQa9Y914.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font> 复方薄荷脑鼻用吸入剂\",\"rx\":false,\"salesNum\":0,\"skuId\":5248204,\"spec\":\"0.675g\",\"storeId\":4818,\"storeName\":\"国大药房旗舰店\",\"xianShiPrice\":\"\"},{\"activityType\":\"1,5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司(原:曼秀雷墩（中山）药业有限公司)\",\"genericName\":\"曼秀雷敦 复方薄荷脑鼻用吸入剂\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"13.5\",\"productCode\":\"2044662\",\"productId\":3511321,\"productImg\":\"https://guodadrugstores.cn/group1/M00/00/2F/CvAUDlyLWVOAIdHFAAHb_-oQa9Y914.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font> 复方薄荷脑鼻用吸入剂\",\"rx\":false,\"salesNum\":9,\"skuId\":3302000,\"spec\":\"0.675g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"10.8\"},{\"activityType\":\"\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"exchangeType\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"复方门冬维甘滴眼液\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":0,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"36\",\"productCode\":\"1171591\",\"productId\":5304867,\"productImg\":\"https://guodadrugstores.cn/group1/M00/04/C6/CvEVD18021KAAnOhAAD_irGlIxk368.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font> 复方门冬维甘滴眼液 13ml\",\"rx\":false,\"salesNum\":0,\"skuId\":5175242,\"spec\":\"13ml\",\"storeId\":4818,\"storeName\":\"国大药房旗舰店\",\"xianShiPrice\":\"\"},{\"activityType\":\"5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":5,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"复方门冬维甘滴眼液\",\"hasStock\":true,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"28\",\"productCode\":\"1171591\",\"productId\":3501767,\"productImg\":\"https://guodadrugstores.cn/group1/M00/04/C6/CvEVD18021KAAnOhAAD_irGlIxk368.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font> 复方门冬维甘滴眼液 13ml\",\"rx\":false,\"salesNum\":104,\"skuId\":3292446,\"spec\":\"13ml\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"},{\"brandId\":1061,\"brandName\":\"全部\",\"factory\":\"曼秀雷敦（中国）药业有限公司\",\"genericName\":\"\",\"hasStock\":false,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"26.9\",\"productCode\":\"1600082\",\"productId\":3510987,\"productImg\":\"https://guodadrugstores.cn/p/14/12314_main_1.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>天然润唇膏-<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>天然润唇膏\",\"rx\":false,\"salesNum\":3,\"skuId\":3301666,\"spec\":\"3.0g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\"},{\"activityType\":\"\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"曼秀雷敦什果冰润唇膏SPF15-草莓\",\"hasStock\":false,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"25.9\",\"productCode\":\"2002495\",\"productId\":4649888,\"productImg\":\"https://guodadrugstores.cn/group1/M00/0A/3E/CvEVD2Cd0NyANXUGAAHV1CuVdTQ318.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>什果冰润唇膏SPF15-草莓(<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>什果冰润唇膏SPF15-草莓)\",\"rx\":false,\"salesNum\":2,\"skuId\":4448201,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"},{\"brandId\":1061,\"brandName\":\"全部\",\"factory\":\"曼秀雷敦(中国)药业有限公司\",\"genericName\":\"\",\"hasStock\":false,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"26.9\",\"productCode\":\"1611329\",\"productId\":3510989,\"productImg\":\"https://guodadrugstores.cn/p/55/7455_main_1.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>水份润唇膏-薄荷叶(SPF15 PA+)\",\"rx\":false,\"salesNum\":0,\"skuId\":3301668,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\"},{\"activityType\":\"5\",\"barCode\":\"\",\"brandId\":1061,\"brandName\":\"全部\",\"evaNum\":0,\"factory\":\"曼秀雷敦（中国）药业有限公司\",\"genericName\":\"曼秀雷敦什果冰润唇膏(苹果味)SPF15\",\"hasStock\":false,\"integralCateId\":0,\"isChain\":1,\"isGift\":0,\"isPoint\":0,\"points\":0,\"pointsPriceYuan\":\"0\",\"price\":\"25.9\",\"productCode\":\"1600287\",\"productId\":3501754,\"productImg\":\"https://guodadrugstores.cn/group1/M00/0A/2E/CvEVD2CZ9lmAYKlaAAEDKRasGtU551.jpg\",\"productName\":\"<font color='#FF9500'>曼</font><font color='#FF9500'>秀</font><font color='#FF9500'>雷</font><font color='#FF9500'>敦</font>什果冰润唇膏(苹果味)SPF15\",\"rx\":false,\"salesNum\":1,\"skuId\":3292433,\"spec\":\"3.5g\",\"storeId\":15849,\"storeName\":\"上海国大龙华东路店\",\"xianShiPrice\":\"\"}],\"brandMap\":{1061:\"全部\"},\"isAll\":1},\"message\":\"success\"}";

        JSONObject jsonObject = JSONObject.parseObject(json);
        JSONObject data = (JSONObject) jsonObject.get("data");

        List<SearchProductVo> pageList = JSON.parseArray(data.getString("proList"), SearchProductVo.class);
        System.out.println("排序前：" + JSONObject.toJSONString(pageList));
        Map<String, List<SearchProductVo>> listMap = pageList.stream().sorted(Comparator.comparingInt(SearchProductVo::getIsChain).reversed()).collect(Collectors.groupingBy(SearchProductVo::getProductCode));
        List<SearchProductVo> temp = new LinkedList<>();
        listMap.forEach((k, v) -> {
            temp.addAll(v);
        });
        pageList = temp;
        System.out.println("排序后：" + JSONObject.toJSONString(pageList));*/
    }
}
